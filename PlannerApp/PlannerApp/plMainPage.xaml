<ContentPage
    x:Class="PlannerApp.MainPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Name="Page"
    Title="Daily Planner"
    BackgroundColor="#F0F4F8">
    
    <VerticalStackLayout Padding="20" Spacing="12">
        <!-- Aesthetic-Usability: Professional header -->
        <Frame BackgroundColor="#3F51B5" CornerRadius="15" Padding="18" HasShadow="True">
            <Grid ColumnDefinitions="*,Auto">
                <VerticalStackLayout Grid.Column="0">
                    <Label Text="Daily Planner" FontSize="24" FontAttributes="Bold" TextColor="White"/>
                    <Label Text="Manage your tasks" FontSize="12" TextColor="#C5CAE9"/>
                </VerticalStackLayout>
                <Label Grid.Column="1" Text="📅" FontSize="32" VerticalOptions="Center"/>
            </Grid>
        </Frame>
        
        <!-- Tesler's Law: Simple inputs -->
        <Entry x:Name="taskEntry" Placeholder="What needs to be done?" FontSize="15" 
               PlaceholderColor="#9E9E9E" TextColor="#212121" BackgroundColor="White" HeightRequest="42"/>
        
        <Frame BackgroundColor="#EEEEEE" CornerRadius="8" Padding="12,8" HasShadow="False" 
               BorderColor="#BDBDBD">
            <Grid ColumnDefinitions="*,Auto">
                <DatePicker x:Name="datePicker" Grid.Column="0" Format="MMM dd, yyyy" FontSize="14" 
                            BackgroundColor="Transparent" TextColor="#212121"/>
                <Label Grid.Column="1" Text="📅" FontSize="18" TextColor="#757575" 
                       VerticalOptions="Center" Margin="5,0,0,0"/>
            </Grid>
        </Frame>
        
        <!-- Fitts's Law & Hick's Law: Clear action buttons with Commands -->
        <Grid ColumnDefinitions="2*,*" ColumnSpacing="8">
            <Button Grid.Column="0" Text="➕ Add Task" Command="{Binding AddTaskCommand}" 
                    BackgroundColor="#4CAF50" TextColor="White" CornerRadius="8" 
                    HeightRequest="42" FontAttributes="Bold"/>
            <Button Grid.Column="1" Text="Clear" Command="{Binding ClearTasksCommand}" 
                    BackgroundColor="#DE0A26" TextColor="White" CornerRadius="8" 
                    HeightRequest="42" FontSize="14"/>
        </Grid>
        
        <!-- Miller's Law: Section header -->
        <Label Text="Tasks" FontSize="15" FontAttributes="Bold" TextColor="#37474F"/>
        
        <!-- Jakob's Law: Familiar task list -->
        <CollectionView ItemsSource="{Binding Tasks}" VerticalOptions="FillAndExpand">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <!-- Von Restorff: Different styling for completed tasks -->
                    <Frame Margin="0,3" CornerRadius="10" Padding="10" HasShadow="True"
                           BackgroundColor="White">
                        <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="10">
                            <!-- Gestalt: Grouped elements -->
                            <CheckBox Grid.Column="0" IsChecked="{Binding IsCompleted}" 
                                      Color="#4CAF50" VerticalOptions="Center"/>
                            
                            <VerticalStackLayout Grid.Column="1" Spacing="2">
                                <Label Text="{Binding Title}" FontSize="15" FontAttributes="Bold"
                                       TextColor="#212121"/>
                                <!-- Doherty Threshold: Quick info display -->
                                <Label Text="{Binding Date, StringFormat='Due: {0:MMM dd}'}" 
                                       FontSize="11" TextColor="#616161"/>
                                <Label Text="{Binding CreatedAt, StringFormat='Added: {0:HH:mm}'}" 
                                       FontSize="10" TextColor="#9E9E9E"/>
                            </VerticalStackLayout>
                            
                            <!-- Delete button for individual task -->
                            <Button Grid.Column="2" Text="✕" 
                                    BackgroundColor="#DE0A26" TextColor="White"
                                    CornerRadius="15" WidthRequest="30" HeightRequest="30"
                                    FontSize="16" Padding="0" VerticalOptions="Center"
                                    Command="{Binding Source={x:Reference Page}, Path=BindingContext.DeleteTaskCommand}"
                                    CommandParameter="{Binding .}"/>
                        </Grid>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
            <!-- Postel's Law: Empty state -->
            <CollectionView.EmptyView>
                <VerticalStackLayout Padding="25" Spacing="8">
                    <Label Text="📋" FontSize="36" HorizontalOptions="Center" Opacity="0.5"/>
                    <Label Text="No tasks yet" FontSize="14" HorizontalOptions="Center" 
                           TextColor="#9E9E9E"/>
                </VerticalStackLayout>
            </CollectionView.EmptyView>
        </CollectionView>
    </VerticalStackLayout>
</ContentPage>
