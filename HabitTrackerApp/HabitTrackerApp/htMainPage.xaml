<ContentPage
    x:Class="HabitTrackerApp.MainPage"
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Name="Page"
    Title="Habit Tracker"
    BackgroundColor="#F8F9FA">
    
    <VerticalStackLayout Padding="20" Spacing="15">
        <!-- Aesthetic-Usability: Attractive header -->
        <Frame BackgroundColor="#00C853" CornerRadius="15" Padding="20" HasShadow="True">
            <VerticalStackLayout>
                <Label Text="Daily Habits" FontSize="26" FontAttributes="Bold" 
                       TextColor="White" HorizontalOptions="Center"/>
                <Label Text="Track up your habits" FontSize="12" TextColor="#B9F6CA" 
                       HorizontalOptions="Center"/>
            </VerticalStackLayout>
        </Frame>
        
        <!-- Tesler's Law: Simple input -->
        <Entry x:Name="habitEntry" Placeholder="Enter new habit..." 
               FontSize="16" PlaceholderColor="#999" TextColor="#212121" BackgroundColor="White"
               HeightRequest="44" Margin="0,0,0,5"/>
        
        <!-- Fitts's Law: Large buttons with Commands -->
        <Grid ColumnDefinitions="2*,*" ColumnSpacing="10">
            <Button Grid.Column="0" Text="➕ Add" Command="{Binding AddHabitCommand}" 
                    BackgroundColor="#00C853" TextColor="White" CornerRadius="8" 
                    HeightRequest="44" FontAttributes="Bold"/>
            <Button Grid.Column="1" Text="Clear" Command="{Binding ClearHabitsCommand}" 
                    BackgroundColor="#FF5252" TextColor="White" CornerRadius="8" 
                    HeightRequest="44"/>
        </Grid>
        
        <!-- Miller's Law: Section label -->
        <Label Text="Your Habits" FontSize="16" FontAttributes="Bold" TextColor="#424242"/>
        
        <!-- Jakob's Law: Familiar list with x:Name for code-behind -->
        <CollectionView x:Name="habitList" VerticalOptions="FillAndExpand">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Frame Margin="0,4" BackgroundColor="White" CornerRadius="10" 
                           Padding="12" HasShadow="True">
                        <Grid ColumnDefinitions="Auto,*,Auto" ColumnSpacing="12">
                            <!-- Gestalt: Grouped checkbox and content -->
                            <CheckBox Grid.Column="0" IsChecked="{Binding IsCompleted}" 
                                      Color="#00C853" VerticalOptions="Center"/>
                            
                            <VerticalStackLayout Grid.Column="1" Spacing="2">
                                <Label Text="{Binding Name}" FontSize="16" FontAttributes="Bold" 
                                       TextColor="#212121"/>
                                <!-- Doherty Threshold: Immediate date feedback -->
                                <Label Text="{Binding DateAdded, StringFormat='Added: {0:MMM dd, HH:mm}'}" 
                                       FontSize="11" TextColor="#757575"/>
                                <!-- Von Restorff: Completion highlight -->
                                <Frame IsVisible="{Binding IsCompleted}" BackgroundColor="#E8F5E9"
                                       CornerRadius="4" Padding="4,2" HasShadow="False">
                                    <Label Text="✓ Done" FontSize="11" TextColor="#00C853" 
                                           FontAttributes="Bold"/>
                                </Frame>
                            </VerticalStackLayout>
                            
                            <!-- Delete button for individual habit -->
                            <Button Grid.Column="2" Text="✕" 
                                    BackgroundColor="#DE0A26" TextColor="White"
                                    CornerRadius="15" WidthRequest="30" HeightRequest="30"
                                    FontSize="16" Padding="0" VerticalOptions="Center"
                                    Command="{Binding Source={x:Reference Page}, Path=BindingContext.DeleteHabitCommand}"
                                    CommandParameter="{Binding .}"/>
                        </Grid>
                    </Frame>
                </DataTemplate>
            </CollectionView.ItemTemplate>
            <!-- Postel's Law: Handle empty state -->
            <CollectionView.EmptyView>
                <VerticalStackLayout Padding="30" Spacing="8">
                    <Label Text="🎯" FontSize="40" HorizontalOptions="Center" Opacity="0.5"/>
                    <Label Text="No habits yet" FontSize="16" HorizontalOptions="Center" 
                           TextColor="#9E9E9E"/>
                </VerticalStackLayout>
            </CollectionView.EmptyView>
        </CollectionView>
        
        <!-- Hick's Law: Simple tip -->
        <Label Text="💡 Check off completed habits" FontSize="12" 
               TextColor="#616161" HorizontalOptions="Center"/>
    </VerticalStackLayout>
</ContentPage>
